import{j as l}from"./jsx-runtime-vNq4Oc-g.js";import{r as o}from"./index-4g5l5LRQ.js";import{P as g}from"./index-VGZxumXs.js";import{P as y}from"./index-V1ubTf5z.js";import{u as w}from"./index-PVQ1FuND.js";import{c as A}from"./clsx-2Jv0kmJG.js";var T=function(e){return function(t,r){var u=o.useRef(!1);e(function(){return function(){u.current=!1}},[]),e(function(){if(!u.current)u.current=!0;else return t()},r)}},x=function(e){return typeof e=="function"},I=!1;const b=I,j=T(o.useEffect);function E(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function R(e){var t=o.useRef(e);return t.current=e,t}var _=function(e){b&&(x(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=R(e);o.useEffect(function(){return function(){t.current()}},[])};const N=_;var P=!!(typeof window<"u"&&window.document&&window.document.createElement);const V=P;function h(e,t){if(V){if(!e)return t;var r;return x(e)?r=e():"current"in e?r=e.current:r=e,r}}var k=function(e){return e.every(function(t){var r=h(t);if(!r)return!1;if(r.getRootNode()instanceof ShadowRoot)return!0})},S=function(e){return e?e.getRootNode():document},U=function(e){if(!e||!document.getRootNode)return document;var t=Array.isArray(e)?e:[e];return k(t)?S(h(t[0])):document};const $=U;var W=function(e){var t=function(r,u,i){var d=o.useRef(!1),f=o.useRef([]),a=o.useRef([]),c=o.useRef();e(function(){var s,m=Array.isArray(i)?i:[i],v=m.map(function(n){return h(n)});if(!d.current){d.current=!0,f.current=v,a.current=u,c.current=r();return}(v.length!==f.current.length||!E(v,f.current)||!E(u,a.current))&&((s=c.current)===null||s===void 0||s.call(c),f.current=v,a.current=u,c.current=r())}),N(function(){var s;(s=c.current)===null||s===void 0||s.call(c),d.current=!1})};return t};const B=W;var C=B(o.useEffect);const D=C;function F(e,t,r){r===void 0&&(r="click");var u=R(e);D(function(){var i=function(a){var c=Array.isArray(t)?t:[t];c.some(function(s){var m=h(s);return!m||m.contains(a.target)})||u.current(a)},d=$(t),f=Array.isArray(r)?r:[r];return f.forEach(function(a){return d.addEventListener(a,i)}),function(){f.forEach(function(a){return d.removeEventListener(a,i)})}},Array.isArray(r)?r:[r],t)}const L=[],H=e=>{const{value:t=L,disabled:r=!1,onChange:u}=e,[i,{setTrue:d,setFalse:f}]=w(!1),a=o.useRef(r),c=o.useRef(null),s=o.useRef(null);a.current!==r&&(a.current=r,r&&f()),j(()=>{var n;i&&((n=s.current)==null||n.focus())},[i]),F(()=>{var p;if(!c.current)return;f();const n=(p=s.current)==null?void 0:p.value;n&&(u==null||u(t.concat(n)))},[c]);const m=n=>{n.stopPropagation(),!r&&d()},v=n=>{if(n.key!=="Enter"&&n.key!=="NumpadEnter")return;f();const p=n.target.value;p&&(u==null||u(t.concat(p)))};return l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(g,{className:"border border-black cursor-default",type:"text",tabIndex:-1,onFocus:n=>{n.target.blur()}}),l.jsx("div",{className:"h-full w-full absolute top-0 left-0 pointer-events-none flex items-center ml-3",children:l.jsxs("div",{className:"flex gap-[10px] pointer-events-auto",children:[t.map((n,p)=>l.jsx(y,{children:l.jsx("span",{className:"opacity-50",children:n})},p)),i&&l.jsx("div",{ref:c,children:l.jsx(y,{className:"cursor-pointer",children:l.jsx(g,{ref:s,className:"!bg-white",size:"xs",disabled:r,onKeyUp:v})})}),!i&&l.jsx(y,{className:A(r?"cursor-not-allowed":"cursor-pointer"),onClick:m,children:l.jsx("span",{className:"text-base font-['Arial'] -translate-y-1 opacity-50",children:"+"})})]})})]})};try{PTagsInput.displayName="PTagsInput",PTagsInput.__docgenInfo={description:"",displayName:"PTagsInput",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Value"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((newValue: Value) => void)"}}}}}catch{}export{H as T};
